<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Chakula - Better than Restaurants</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/grayscale.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
    <!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">
                    <i class="fa fa-play-circle"></i> Chakula
                </a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#about">How It Works</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#download">About</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Intro Header -->
    <header class="intro">
        <div class="intro-body">
            <div class="container">
                <div class="row">
                    <div class = "col-md-10 col-md-offset-1">
                        <h1>Delicious Food</h1>
                        <h1>Incredible Company</h1>                    
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <p class="intro-text">Unforgettable popup meals hosted by Georgetown's best chefs.</p>
          <form id="signup" role="form">
            <div class="input-group">
              <input class="email-field btn-lg" name="email" id="email" type="email" placeholder="Your georgetown.edu email" required>
              <button class="submit-btn btn-info btn-lg" type="button" onClick="validate(); return false;">Signup</button>
              <div class="checkbox">
                    <label><input type="checkbox" id="host-check">I can cook and wanna get paid to host!</label>
              </div>
            </div>
          </form>
                        <a href="#about" class="btn btn-circle page-scroll">
                            <i class="fa fa-angle-double-down animated"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- About Section -->
    <section id="about" class="how container content-section text-center">
        <div class="how-section row">
            <div class="col-lg-8 col-lg-offset-2">
                <h2>How it Works</h2>
                <ol>
                </ol>
                <p>Chakula connects the best cooks at Georgetown with guests who are hungry for a new way to dine. Hosts make money doing what they love and guests get an unforgetable meal.</p>
                <p>1. <b> Discover upcoming meals </b> prepared by our incredible hosts in our weekly email.</p> 
                <p>2. <b> See something you like? </b> Request a spot at the table. We'll get your payment info but will only charge you after the meal.</p>
                <p>3. Once the host welcomes you to their meal, we'll send you their address. <b> Bon appetit!</b> </p>
            </div>
        </div>
    </section>
    <!-- About Us -->
    <section id="download" class="content-section text-center">
        <div class="who-section">
            <div class="container">
                <div class="col-lg-8 col-lg-offset-2">
                    <h2>Who Are We?</h2>
                    <div class="row">
                        <div class="col-lg-4">
                            <img class="prof-pic img-circle img-responsive" src="img/prof-agree.jpg">
                            <p>Agree</p>
                        </div>
                        <div class="col-lg-4">
                            <img class="prof-pic img-circle img-responsive" src="img/prof-pat.jpg">
                            <p>Pat</p>
                        </div>
                        <div class="col-lg-4">
                            <img class="prof-pic img-circle img-responsive" src="img/prof-ross.jpg">
                            <p>Ross</p>
                        </div>
                    </div>
                    <div class="row">
                        <p>We're 3 friends (2 Hoyas, 1 Jumbo) who love to cook and love to host. Combined, we've hosted well over 70 large Sunday dinners for friends and acquaintances. Now we want to show the world what happens when amazing people connect over an amazing meal, starting with Georgetown.</p>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact container content-section text-center">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2">
                <h2>Say Hi!</h2>
                <p>Feel free to email us about anything</p>
                <p><a href="mailto:yaychakula@gmail.com">yaychakula@gmail.com</a>
                </p>
<!--                 <ul class="list-inline banner-social-buttons">
                    <li>
                        <a href="https://twitter.com/SBootstrap" class="btn btn-default btn-lg"><i class="fa fa-twitter fa-fw"></i> <span class="network-name">Twitter</span></a>
                    </li>
                    <li>
                        <a href="https://github.com/IronSummitMedia/startbootstrap" class="btn btn-default btn-lg"><i class="fa fa-github fa-fw"></i> <span class="network-name">Github</span></a>
                    </li>
                    <li>
                        <a href="https://plus.google.com/+Startbootstrap/posts" class="btn btn-default btn-lg"><i class="fa fa-google-plus fa-fw"></i> <span class="network-name">Google+</span></a>
                    </li>
                </ul>
 -->            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container text-center">
            <p>Copyright &copy; Chakula 2015</p>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="js/jquery.easing.min.js"></script>
    <script>
        function validateEmail(email) { 
  // http://stackoverflow.com/a/46181/11236
            var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|((georgetown+\.)+edu))$/;
            return re.test(email);
        }

        api_call = function(api_fragment, data) {
            var response = $.ajax({
                url: api_fragment,
                method: 'POST',
                data: data,
                dataType: 'json',
                async: false,
              }).responseText;
              var resp = JSON.parse(response);
              if (resp.Success){
                return resp.Return;
              } else {
                return undefined;
              }
        };
        function validate(){
          $("#result").text("");
          var userEmail = $("#email").val().toLowerCase();
          if (validateEmail(userEmail)) {
            var form = document.getElementById("signup");
            var successMsg = document.createElement("p");
            successMsg.innerHTML = "Welcome to Chakula! We'll be in touch soon";
            form.parentNode.replaceChild(successMsg, form);
            console.log("Valid email")
            resp = api_call('api/kitchen', {
                method: "Register",
                email: userEmail,
                host: $('#host-check').is(':checked')
            });
            console.log(resp)
          } else {
            console.log("invalid email")
          }
          return false;
        }
    </script>
    <!-- Custom Theme JavaScript -->
    <script src="js/grayscale.js"></script>

</body>

</html>
